---
layout: post
title: Legacy
---

<p class="message">
  Legacy is an older box on HTB and has an easily exploited vulnerability through Metasploit. In the spirit of the OSCP exam I will be manually be exploiting the vulnerability. 
</p>

<!-- Initial Enum -->
This is my initial Nmap scan

First I scan the target using nmap.

I like using the command $ sudo nmap -p- --min-rate 1000 -T4 <ip>\
Now this does scan every port on the target IP which is generally advised against as it slows the scan down. This is why I specify the --min-rate 1000 meaning nmap will send at least 1000 packets per second. Furthermore I specify the -T4 flag which increases nmaps aggressivness in the scan.\
This has the trade off of not always being entirely accurate but for an initial quick scan it works well to catch the ports outside of the top 1000 ports. 

<img src="https://raw.githubusercontent.com/lukej2680/lukej2680.github.io/master/_images/legacy/Legacy_nmap_scan.png" alt="Test">
<!-- ![Initial Scan](https://lukej2680.github.io/master/_images/legacy/Legacy_nmap_scan.png "Initial Scan") -->

After running the initial quick scan I can see the ports 139 and 445 are open.\
Using this info I'll run my next two nmap scans\
$ sudo nmap -p139,445 -sC -sV <ip>\
$ sudo nmap -p139,445 --script vulns <ip>\
The first scan runs the basic nmap scripts against the specified ports and returns basic info on the services running.\
The second scan runs nmaps vulnerability scripts against the specified ports returning common vulnerabilities.
<p class="message"> Usually I don't use the vuln scan but since this box is named "Legacy" I figured it could find some vulnerabilities</p>

<img src="https://raw.githubusercontent.com/lukej2680/lukej2680.github.io/master/_images/legacy/legacy_nmap_script_scan.png">
<img src="https://raw.githubusercontent.com/lukej2680/lukej2680.github.io/master/_images/legacy/legacy_nmap_vuln_scan.png">
